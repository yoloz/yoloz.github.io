<!DOCTYPE html>
<html>
<head>
	<title>Yoloz</title>
	<meta charset="utf-8">

	<!-- 引入配置文件 -->
	
<link rel="stylesheet" href="/css/main.css">


	<!-- 字体图片库 -->
	
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


	<!-- 代码高亮库 -->
	
<link rel="stylesheet" href="/lib/highlight/styles/atom-one-dark.css">

	
<meta name="generator" content="Hexo 4.2.0"></head>
<body>

	<div id="main">
		<!-- 引入侧边栏 -->
		<aside>
			<!-- 搜索栏 -->
<div id="search">
	<input class="search-input" type="text" placeholder="filter by name"/>
	<i id="search-icon" class="fa fa-bars" title="切换目录与索引"></i>
</div>

<!-- 侧边目录栏 -->
<div id="tree">
	

	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				database
			</a>
			
	<ul>
		<li class="file">
			<a href="/2020/02/20/database/mysql使用/">
				<i class="fa fa-file"></i>
				mysql使用
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/20/database/概述DQL,DML,DDL,DCL/">
				<i class="fa fa-file"></i>
				概述DQL,DML,DDL,DCL
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				hadoop
			</a>
			
	<ul>
		<li class="file">
			<a href="/2019/09/18/hadoop/hadoop-2.7.3单机搭建/">
				<i class="fa fa-file"></i>
				hadoop-2.7.3单机搭建
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/05/18/hadoop/hbase-2.2.4伪分布式/">
				<i class="fa fa-file"></i>
				hbase-2.2.4伪分布式
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/12/03/hadoop/hbase架构了解/">
				<i class="fa fa-file"></i>
				hbase架构了解
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file active">
			<a href="/2019/09/18/hadoop/hive-2.1.0单机搭建/">
				<i class="fa fa-file"></i>
				hive-2.1.0单机搭建
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				java
			</a>
			
	<ul>
		<li class="file">
			<a href="/2020/04/01/java/CompletableFuture详解/">
				<i class="fa fa-file"></i>
				CompletableFuture详解
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/03/10/java/JVM调式工具/">
				<i class="fa fa-file"></i>
				JVM调式工具
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/28/java/ReentrantLock/">
				<i class="fa fa-file"></i>
				ReentrantLock
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/07/30/java/date与localDateTime/">
				<i class="fa fa-file"></i>
				date与localDateTime
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/11/28/java/jar的使用/">
				<i class="fa fa-file"></i>
				jar的使用
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/03/10/java/javaThreadDump日志分析/">
				<i class="fa fa-file"></i>
				javaThreadDump日志分析
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/12/14/java/java进程占用virt虚拟内存高的问题研究/">
				<i class="fa fa-file"></i>
				java进程占用virt虚拟内存高的问题研究
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/02/15/java/jvm启动参数/">
				<i class="fa fa-file"></i>
				jvm启动参数
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/07/30/java/读取InputStream生成String/">
				<i class="fa fa-file"></i>
				读取InputStream生成String
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				kafka
			</a>
			
	<ul>
		<li class="file">
			<a href="/2018/12/11/kafka/consumerApi/">
				<i class="fa fa-file"></i>
				consumerApi
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/01/26/kafka/producer/">
				<i class="fa fa-file"></i>
				producer
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/01/23/kafka/sasl-plaintext-acl/">
				<i class="fa fa-file"></i>
				sasl-plaintext-acl
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				linux
			</a>
			
	<ul>
		<li class="file">
			<a href="/2020/02/29/linux/DNS/">
				<i class="fa fa-file"></i>
				DNS
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/03/19/linux/Locale/">
				<i class="fa fa-file"></i>
				Locale
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/07/24/linux/alternatives/">
				<i class="fa fa-file"></i>
				alternatives
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/26/linux/du,df/">
				<i class="fa fa-file"></i>
				du,df
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/03/11/linux/killall,kill,pkill/">
				<i class="fa fa-file"></i>
				killall,kill,pkill
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/03/10/linux/ncat(nc)/">
				<i class="fa fa-file"></i>
				ncat(nc)
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/11/30/linux/ps/">
				<i class="fa fa-file"></i>
				ps
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/09/18/linux/shell中sh, exec, source, fork的区别/">
				<i class="fa fa-file"></i>
				shell中sh, exec, source, fork的区别
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/26/linux/ssh/">
				<i class="fa fa-file"></i>
				ssh
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/11/13/linux/tcp连接数/">
				<i class="fa fa-file"></i>
				tcp连接数
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/11/13/linux/ulimit/">
				<i class="fa fa-file"></i>
				ulimit
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/11/30/linux/vim/">
				<i class="fa fa-file"></i>
				vim
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/09/18/linux/which,whereis,locate,find/">
				<i class="fa fa-file"></i>
				which,whereis,locate,find
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/29/linux/服务自启动/">
				<i class="fa fa-file"></i>
				服务自启动
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/09/18/linux/用户及组/">
				<i class="fa fa-file"></i>
				用户及组
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/12/04/linux/编写shell/">
				<i class="fa fa-file"></i>
				编写shell
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/29/linux/静态ip地址/">
				<i class="fa fa-file"></i>
				静态ip地址
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				lucene
			</a>
			
	<ul>
		<li class="file">
			<a href="/2019/02/18/lucene/Lucene的Index文档模型/">
				<i class="fa fa-file"></i>
				Lucene的Index文档模型
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				network
			</a>
			
	<ul>
		<li class="file">
			<a href="/2020/02/23/network/TCPIP常見封包/">
				<i class="fa fa-file"></i>
				TCPIP常見封包
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/23/network/cksum(checksum)incorrect/">
				<i class="fa fa-file"></i>
				cksum(checksum)incorrect
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/03/10/network/tcp_timestamps/">
				<i class="fa fa-file"></i>
				tcp_timestamps
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/23/network/tcpdump/">
				<i class="fa fa-file"></i>
				tcpdump
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				other
			</a>
			
	<ul>
		<li class="file">
			<a href="/2018/12/10/other/git/">
				<i class="fa fa-file"></i>
				git
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/11/27/other/hexo搭建博客/">
				<i class="fa fa-file"></i>
				hexo搭建博客
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/11/27/other/start-hexo/">
				<i class="fa fa-file"></i>
				start-hexo
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/12/05/other/svn/">
				<i class="fa fa-file"></i>
				svn
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/02/19/other/yaml格式/">
				<i class="fa fa-file"></i>
				yaml格式
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/02/15/other/五种开源协议(GPL,LGPL,BSD,MIT,Apache)/">
				<i class="fa fa-file"></i>
				五种开源协议(GPL,LGPL,BSD,MIT,Apache)
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				security
			</a>
			
	<ul>
		<li class="file">
			<a href="/2020/04/18/security/SSL双向认证实现/">
				<i class="fa fa-file"></i>
				SSL双向认证实现
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/04/17/security/X.509数字证书中的扩展项/">
				<i class="fa fa-file"></i>
				X.509数字证书中的扩展项
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/04/17/security/keytool命令详解/">
				<i class="fa fa-file"></i>
				keytool命令详解
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
	<ul>
		<li class="directory">
			<a href="#" class="directory">
				<i class="fa fa-folder"></i>
				web
			</a>
			
	<ul>
		<li class="file">
			<a href="/2019/02/20/web/javaScript遍历对象、数组/">
				<i class="fa fa-file"></i>
				javaScript遍历对象、数组
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2020/02/29/web/npm,nvm,nrm,npx,cnpm/">
				<i class="fa fa-file"></i>
				npm,nvm,nrm,npx,cnpm
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2018/11/29/web/react-loadable代码分割/">
				<i class="fa fa-file"></i>
				react-loadable代码分割
			</a>
		</li>
	</ul>
	
	<ul>
		<li class="file">
			<a href="/2019/02/20/web/react组件之间通信/">
				<i class="fa fa-file"></i>
				react组件之间通信
			</a>
		</li>
	</ul>
	
		</li>

	</ul>
	
</div>


<!-- 展示文章内部标题 -->
<div id="toc" style="display: none;">
</div>
		</aside>

		<!-- 引入导航 -->
		<nav>
			<div class="container-fluid">
    <ul id="menu">
        
        
        <li class="menu-item">
            <a href="/" class="menu-item-link">主页</a>
        </li>
        
        <li class="menu-item">
            <a href="/about" class="menu-item-link">关于</a>
        </li>
        

        
        
        <li class="menu-item">
            <a href="https://github.com/yoloz" class="menu-item-link" target="_blank">github</a>
        </li>
        
    </ul>
</div>
		</nav>

		<!-- 引入正文 -->
		<div id="content">
			<div style="background: #eee">
	<span id="post-author">yoloz</span>
	<span id="post-date">2019-09-18 16:56:50</span>
</div>

<div id="article">
	<p>Requirements:jdk, hadoop</p>
<p><code>tar -zxvf apache-hive-2.1.0-bin.tar.gz -C ~</code></p>
<h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><ul>
<li>hive-env.sh</li>
</ul>
<p><code>cp $HIVE_HOME/conf/hive-env.sh.template $HIVE_HOME/conf/hive-env.sh</code><br>主要是配置hadoop的路径, 找到”HADOOP_HOME==”，填写hadoop路径</p>
<ul>
<li>hive-site.xml</li>
</ul>
<p><code>cp $HIVE_HOME/conf/hive-default.xml.template $HIVE_HOME/conf/hive-site.xml</code><br>主要是配置metadata存储及hive数据存储在hdfs的位置, 可以直接使用默认的derby，如下使用mysql:</p>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>
<span class="tag">&lt;<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
<span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://localhost:3306/hive_basic?createDatabaseIfNotExist=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8<span class="symbol">&amp;amp;</span>useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span>
<span class="tag">&lt;<span class="name">description</span>&gt;</span>hive_basic为要创建的数据库名,注意字符集设置<span class="tag">&lt;/<span class="name">description</span>&gt;</span>
<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
<span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span>
<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
<span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span>
<span class="tag">&lt;<span class="name">description</span>&gt;</span>登录账户名<span class="tag">&lt;/<span class="name">description</span>&gt;</span>
<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
<span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span>
<span class="tag">&lt;<span class="name">description</span>&gt;</span>登录密码<span class="tag">&lt;/<span class="name">description</span>&gt;</span>
<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.metastore.warehouse.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
<span class="tag">&lt;<span class="name">value</span>&gt;</span>/user/hive/warehouse<span class="tag">&lt;/<span class="name">value</span>&gt;</span>
<span class="tag">&lt;<span class="name">description</span>&gt;</span>hive表在hdfs的位置<span class="tag">&lt;/<span class="name">description</span>&gt;</span>
<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></code></pre>

<blockquote>
<p>如果使用mysql, 需要将对应的jdbc驱动jar移到lib下</p>
</blockquote>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h2><pre><code class="highlight sh"><span class="comment">#hadoop已启动</span>
<span class="built_in">export</span> HADOOP_HOME=&lt;hadoop-install-dir&gt;
<span class="variable">$HIVE_HOME</span>/bin/schematool -dbType &lt;db <span class="built_in">type</span>&gt; -initSchema  <span class="comment"># use "derby" as db type or "mysql"</span></code></pre>

<h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><pre><code class="highlight sh"><span class="variable">$HIVE_HOME</span>/bin/hiveserver2 &amp;  <span class="comment">#"&amp;" 表示后台运行</span>
<span class="variable">$HIVE_HOME</span>/bin/beeline
<span class="comment"># beeline&gt; !connect jdbc:hive2://localhost:10000/default</span>
<span class="comment"># Connecting to jdbc:hive2://localhost:10000/default</span>
<span class="comment"># Enter username for jdbc:hive2://localhost:10000/default:(直接回车)</span>
<span class="comment"># Enter password for jdbc:hive2://localhost:10000/default:(直接回车)</span>
<span class="comment"># Error: Failed to open new session: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: ylz is not allowed to impersonate anonymous (state=,code=0)</span>
<span class="comment"># beeline&gt;</span></code></pre>

<blockquote>
<p>default localhost:10000<br>默认没有用户密码, hive-site.xml中hive.server2.authentication为NONE</p>
</blockquote>
<p>对于上述的Error, 修改hadoop的core-site.xml加入:</p>
<pre><code class="highlight xml"><span class="tag">&lt;<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.ylz.hosts<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
<span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span>
<span class="tag">&lt;/<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">property</span>&gt;</span>
<span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.proxyuser.ylz.groups<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
<span class="tag">&lt;<span class="name">value</span>&gt;</span>*<span class="tag">&lt;/<span class="name">value</span>&gt;</span>
<span class="tag">&lt;/<span class="name">property</span>&gt;</span></code></pre>

<p>重启hadoop</p>
<pre><code class="highlight sh"><span class="variable">$HADOOP_HOME</span>/sbin/hadoop-daemon.sh stop namenode
<span class="variable">$HADOOP_HOME</span>/sbin/hadoop-daemon.sh stop secondarynamenode
<span class="variable">$HADOOP_HOME</span>/sbin/hadoop-daemon.sh stop datanode
<span class="variable">$HADOOP_HOME</span>/sbin/hadoop-daemon.sh start namenode
<span class="variable">$HADOOP_HOME</span>/sbin/hadoop-daemon.sh start secondarynamenode
<span class="variable">$HADOOP_HOME</span>/sbin/hadoop-daemon.sh start datanode</code></pre>

<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><p>使用原生方式如下:</p>
<pre><code class="highlight java"><span class="meta">@Test</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hiveTest</span><span class="params">()</span> </span>&#123;
    String url = <span class="string">"jdbc:hive2://127.0.0.1:10000/default"</span>;
    <span class="keyword">try</span> &#123;
        Properties properties = <span class="keyword">new</span> Properties();
        Class.forName(<span class="string">"org.apache.hive.jdbc.HiveDriver"</span>);
        <span class="keyword">try</span> (Connection conn = DriverManager.getConnection(url, properties);
            Statement stmt = conn.createStatement();
            ResultSet rs = stmt.executeQuery(<span class="string">"show databases"</span>)) &#123;
            <span class="keyword">while</span> (rs.next()) &#123;
                System.out.println(rs.getString(<span class="number">1</span>));
            &#125;
        &#125;
    &#125; <span class="keyword">catch</span> (Exception e) &#123;
        e.printStackTrace();
    &#125;
&#125;
<span class="meta">@Test</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hiveKerberosTest</span><span class="params">()</span> </span>&#123;
    String url = <span class="string">"jdbc:hive2://127.0.0.1:10000/default;principal=hive/cdh1.com@CDHKDC.COM"</span>;
    <span class="keyword">try</span> &#123;
        Properties properties = <span class="keyword">new</span> Properties();
        org.apache.hadoop.conf.Configuration conf = <span class="keyword">new</span> org.apache.hadoop.conf.Configuration();
        conf.set(<span class="string">"hadoop.security.authentication"</span>, <span class="string">"Kerberos"</span>);
        UserGroupInformation.setConfiguration(conf);
        UserGroupInformation.loginUserFromKeytab(<span class="string">"wufang"</span>, <span class="string">"/tmp/wufang.keytab"</span>);
        Class.forName(<span class="string">"org.apache.hive.jdbc.HiveDriver"</span>);
        <span class="keyword">try</span> (Connection conn = DriverManager.getConnection(url, properties);
                Statement stmt = conn.createStatement();
                ResultSet rs = stmt.executeQuery(<span class="string">"show databases"</span>)) &#123;
            <span class="keyword">while</span> (rs.next()) &#123;
                System.out.println(rs.getString(<span class="number">1</span>));
            &#125;
        &#125;
    &#125; <span class="keyword">catch</span> (Exception e) &#123;
        e.printStackTrace();
    &#125;
&#125;</code></pre>

<blockquote>
<p>jdbc:hive2://127.0.0.1:10000/default  </p>
</blockquote>
<p>jdbc:hive2://127.0.0.1:10000/default; principal=hive/cdh1.com@CDHKDC. COM<br>jdbc:hive2://hdp1:2181, hdp2:2181, hdp3:2181/; serviceDiscoveryMode=zooKeeper; zooKeeperNamespace=hiveserver2  </p>
<ul>
<li>dependencies</li>
</ul>
<p>commons-collections-3.2.2.jar<br>commons-configuration-1.6.jar<br>commons-lang-2.6.jar<br>hadoop-auth-2.6.0-cdh5.8.3.jar<br>hadoop-common-2.7.3.jar<br>hive-exec-1.1.0-cdh5.8.3.jar<br>hive-jdbc-1.1.0-cdh5.8.3.jar<br>hive-metastore-1.1.0-cdh5.8.3.jar<br>hive-serde-1.1.0-cdh5.8.3.jar<br>hive-service-1.1.0-cdh5.8.3.jar<br>httpclient-4.4.jar<br>httpcore-4.4.jar<br>libthrift-0.9.3.jar  </p>
<p>cdh版也可以使用如下方式</p>
<pre><code class="highlight java"><span class="meta">@Test</span>
<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cdhHiveTest</span><span class="params">()</span> </span>&#123;
    String url = <span class="string">"jdbc:hive2://127.0.0.1:10000/default;AuthMech=1;"</span> +
            <span class="string">"KrbRealm=CDHKDC.COM;KrbHostFQDN=cdh1.com;"</span> +
            <span class="string">"KrbServiceName=hive;KrbAuthType=2"</span>;
    <span class="keyword">try</span> &#123;
        Properties properties = <span class="keyword">new</span> Properties();
        Class.forName(<span class="string">"com.cloudera.hive.jdbc41.HS2Driver"</span>);
        <span class="keyword">try</span> (Connection conn = DriverManager.getConnection(url, properties);
                Statement stmt = conn.createStatement();
                ResultSet rs = stmt.executeQuery(<span class="string">"show databases"</span>)) &#123;
            <span class="keyword">while</span> (rs.next()) &#123;
                System.out.println(rs.getString(<span class="number">1</span>));
            &#125;
        &#125;
    &#125; <span class="keyword">catch</span> (Exception e) &#123;
        e.printStackTrace();
    &#125;
&#125;</code></pre>

<blockquote>
<p><a href="https://www.cloudera.com/documentation/enterprise/latest/topics/hive_jdbc_odbc_driver_install.html#hive_installing_jdbc_odbc_drivers" target="_blank" rel="noopener">Installing Cloudera JDBC and ODBC Drivers on Clients in CDH</a><br><a href="https://www.cloudera.com/documentation/other/connectors/hive-jdbc/latest.html" target="_blank" rel="noopener">Cloudera JDBC latest Driver Documentation for Apache Hive</a></p>
</blockquote>

</div>

		</div>
		
	</div>

	<!-- 引入代码高亮的 js -->
	
<script src="/lib/highlight/highlight.pack.js"></script>


	<!-- 引入 jquery -->
	
<script src="/lib/jquery-3.4.1.min.js"></script>


	<!-- 引入 pjax -->
	
<script src="/lib/jquery.pjax.js"></script>

	
	<!-- 引入 js 文件 -->
	
<script src="/js/main.js"></script>


	<!-- <script src="https://cdn.jsdelivr.net/npm/live2d-widget@3.0.4/lib/L2Dwidget.min.js"></script>
	<script type="text/javascript">
	L2Dwidget.init();
	</script> -->

</body>
</html>