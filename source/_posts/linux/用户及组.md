---
title: 用户及组
comments: false
toc: false
date: 2019-09-18 23:57:50
categories:
tags:
---

## 创建用户及组

sudo权限可以通过用户组或修改/etc/sudoers文件

``` sh
$ groupadd gname                         #新建用户组

$ useradd -m uname                       #新建用户并创建用户目录
$ usermod -G sudo -a uname               #新创建的用户加入sudo(超级权限)组
$ usermod -G wheel -a uname              #centos默认没有sudo组,wheel组拥有sudo权限，可能sudo仍没有权限，则可改变主组到wheel,-G换成-g
$ passwd uname                           #新用户设置密码

$ userdel -r uname                       #删除用户
$ groupdel gname                         #删除用户组
$ gpasswd -d uname gname                 #从组gname里删除用户uname
```
> 在centos上可能会出现usermod: group 'sudo' does not exist,
因为centos默认没有sudo组，可以将用户指向wheel用户组, wheel用户组同样有sudo权限。
>
> usermod -g gname uname是把用户的主组变成gname
>
>usermod -G gname uname只是把用户加到gname组，并没有改变主组
>
>修改/etc/sudoers添加 `uname ALL=(ALL) ALL`
>
> 删除用户时携带-r表示完全删除，不添加则home及相关数据保留仅删除用户


## 查看用户及组

用户列表文件 `/etc/passwd` , 用户组列表文件 `/etc/group` 

